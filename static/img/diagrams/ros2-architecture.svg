<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#2e8555">ROS 2 Architecture</text>
  
  <!-- Node 1: Robot Driver -->
  <rect x="50" y="100" width="150" height="80" fill="#4CAF50" stroke="#333" stroke-width="2" rx="5"/>
  <text x="125" y="135" text-anchor="middle" font-size="16" font-weight="bold" fill="white">Robot Driver</text>
  <text x="125" y="155" text-anchor="middle" font-size="12" fill="white">Node</text>
  
  <!-- Node 2: Vision System -->
  <rect x="50" y="300" width="150" height="80" fill="#2196F3" stroke="#333" stroke-width="2" rx="5"/>
  <text x="125" y="335" text-anchor="middle" font-size="16" font-weight="bold" fill="white">Vision System</text>
  <text x="125" y="355" text-anchor="middle" font-size="12" fill="white">Node</text>
  
  <!-- Node 3: Motion Planner -->
  <rect x="325" y="200" width="150" height="80" fill="#FF9800" stroke="#333" stroke-width="2" rx="5"/>
  <text x="400" y="235" text-anchor="middle" font-size="16" font-weight="bold" fill="white">Motion Planner</text>
  <text x="400" y="255" text-anchor="middle" font-size="12" fill="white">Node</text>
  
  <!-- Node 4: Controller -->
  <rect x="600" y="200" width="150" height="80" fill="#9C27B0" stroke="#333" stroke-width="2" rx="5"/>
  <text x="675" y="235" text-anchor="middle" font-size="16" font-weight="bold" fill="white">Controller</text>
  <text x="675" y="255" text-anchor="middle" font-size="12" fill="white">Node</text>
  
  <!-- Topic 1: /sensor_data -->
  <ellipse cx="125" cy="220" rx="70" ry="25" fill="#FFF3E0" stroke="#333" stroke-width="2"/>
  <text x="125" y="222" text-anchor="middle" font-size="12" fill="#333">/sensor_data</text>
  <text x="125" y="235" text-anchor="middle" font-size="10" fill="#666">Topic</text>
  
  <!-- Topic 2: /cmd_vel -->
  <ellipse cx="538" cy="140" rx="60" ry="25" fill="#E3F2FD" stroke="#333" stroke-width="2"/>
  <text x="538" y="142" text-anchor="middle" font-size="12" fill="#333">/cmd_vel</text>
  <text x="538" y="155" text-anchor="middle" font-size="10" fill="#666">Topic</text>
  
  <!-- Topic 3: /camera/image -->
  <ellipse cx="262" cy="340" rx="75" ry="25" fill="#F3E5F5" stroke="#333" stroke-width="2"/>
  <text x="262" y="342" text-anchor="middle" font-size="12" fill="#333">/camera/image</text>
  <text x="262" y="355" text-anchor="middle" font-size="10" fill="#666">Topic</text>
  
  <!-- Service: /get_plan -->
  <rect x="325" y="350" width="150" height="60" fill="#FFEBEE" stroke="#333" stroke-width="2" stroke-dasharray="5,5" rx="5"/>
  <text x="400" y="375" text-anchor="middle" font-size="14" fill="#333">/get_plan</text>
  <text x="400" y="395" text-anchor="middle" font-size="10" fill="#666">Service</text>
  
  <!-- Arrows: Publisher to Topic -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>
  
  <!-- Robot Driver publishes to /sensor_data -->
  <line x1="125" y1="180" x2="125" y2="195" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="140" y="190" font-size="10" fill="#666">pub</text>
  
  <!-- Motion Planner subscribes to /sensor_data -->
  <line x1="195" y1="220" x2="325" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="250" y="215" font-size="10" fill="#666">sub</text>
  
  <!-- Vision System publishes to /camera/image -->
  <line x1="200" y1="340" x2="187" y2="340" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="210" y="335" font-size="10" fill="#666">pub</text>
  
  <!-- Motion Planner subscribes to /camera/image -->
  <line x1="337" y1="340" x2="370" y2="280" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="345" y="305" font-size="10" fill="#666">sub</text>
  
  <!-- Motion Planner publishes to /cmd_vel -->
  <line x1="450" y1="200" x2="490" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="460" y="170" font-size="10" fill="#666">pub</text>
  
  <!-- Controller subscribes to /cmd_vel -->
  <line x="588" y1="150" x2="625" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="595" y="170" font-size="10" fill="#666">sub</text>
  
  <!-- Controller uses /get_plan service -->
  <line x1="600" y1="260" x2="475" y2="360" stroke="#333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="530" y="305" font-size="10" fill="#666">call</text>
  
  <!-- Legend -->
  <rect x="50" y="480" width="700" height="100" fill="#F5F5F5" stroke="#333" stroke-width="1" rx="5"/>
  <text x="60" y="500" font-size="14" font-weight="bold" fill="#333">Legend:</text>
  
  <rect x="60" y="510" width="80" height="30" fill="#4CAF50" stroke="#333" stroke-width="1" rx="3"/>
  <text x="100" y="530" text-anchor="middle" font-size="12" fill="white">Node</text>
  
  <ellipse cx="190" cy="525" rx="40" ry="15" fill="#FFF3E0" stroke="#333" stroke-width="1"/>
  <text x="190" y="528" text-anchor="middle" font-size="10" fill="#333">Topic</text>
  
  <rect x="250" y="510" width="80" height="30" fill="#FFEBEE" stroke="#333" stroke-width="1" stroke-dasharray="3,3" rx="3"/>
  <text x="290" y="530" text-anchor="middle" font-size="12" fill="#333">Service</text>
  
  <line x1="350" y1="525" x2="410" y2="525" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="420" y="530" font-size="12" fill="#333">Data flow</text>
  
  <text x="60" y="560" font-size="11" fill="#666">• Nodes: Independent processes that perform computation</text>
  <text x="60" y="575" font-size="11" fill="#666">• Topics: Named buses for publishing/subscribing messages (many-to-many)</text>
</svg>
